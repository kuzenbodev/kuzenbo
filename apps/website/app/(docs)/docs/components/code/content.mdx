---
title: "Code Components"
description: "Build code-focused docs and product surfaces with @kuzenbo/code blocks, tabs, diffs, terminals, and playground primitives."
---

## Overview

`@kuzenbo/code` is the developer-experience package for docs, onboarding, and code-heavy product surfaces.
It includes Shiki-backed highlighting, install-command UX, review views (diff/annotations/terminal), and a playground system.
In the Kuzenbo `/docs` site, markdown fenced code blocks are rendered through Shiki with a language label and copy action by default.

## Installation

```bash
bun add @kuzenbo/code @kuzenbo/core @kuzenbo/theme
```

In almost all apps, keep `@kuzenbo/theme` installed alongside `@kuzenbo/code` and `@kuzenbo/core`.

## Import

```tsx
import { CodeBlock } from "@kuzenbo/code/ui/code-block";
import { CodeBlockToolbar } from "@kuzenbo/code/ui/code-block-toolbar";
import { CodeDiffBlock } from "@kuzenbo/code/ui/code-diff-block";
import { CodeLineHighlight } from "@kuzenbo/code/ui/code-line-highlight";
import { CodePreview } from "@kuzenbo/code/ui/code-preview";
import { CodeTabs } from "@kuzenbo/code/ui/code-tabs";
import { CodeWindow } from "@kuzenbo/code/ui/code-window";
import { FileTree } from "@kuzenbo/code/ui/file-tree";
import { InlineCodeHighlight } from "@kuzenbo/code/ui/inline-code-highlight";
import { InstallCommandSnippet } from "@kuzenbo/code/ui/install-command-snippet";
import { PackageManagerTabs } from "@kuzenbo/code/ui/package-manager-tabs";
import { Playground } from "@kuzenbo/code/ui/playground";
import { TerminalBlock } from "@kuzenbo/code/ui/terminal-block";
import { definePlaygroundControls } from "@kuzenbo/code/playground/playground-control-model";
import {
  highlightCode,
  highlightInlineCode,
} from "@kuzenbo/code/shiki/highlight-code";
```

## Component Surface

- `CodeBlock`, `InlineCodeHighlight`, `CodeBlockToolbar`: display and copy-ready code presentation.
- `CodeTabs`, `PackageManagerTabs`, `InstallCommandSnippet`: alternate variants and package-manager install flows.
- `CodeWindow`, `CodePreview`: screenshot-like shell and preview/code/split composition.
- `CodeLineHighlight`, `CodeDiffBlock`, `TerminalBlock`, `FileTree`: review and teaching docs primitives.
- `Playground.Root`, `Playground.Controls`, `Playground.Code`: generic live-preview playground building blocks.

## Display Example

```tsx
import { CodeBlock } from "@kuzenbo/code/ui/code-block";
import { CodeBlockToolbar } from "@kuzenbo/code/ui/code-block-toolbar";
import { CodeWindow } from "@kuzenbo/code/ui/code-window";
import { InlineCodeHighlight } from "@kuzenbo/code/ui/inline-code-highlight";
import { CopyButton } from "@kuzenbo/core/ui/copy-button";

const sourceCode = `import { Button } from "@kuzenbo/core";

export function SaveButton() {
  return <Button>Save</Button>;
}`;

export function CodeDisplayExample() {
  return (
    <CodeWindow title="button.tsx">
      <CodeBlock
        code={sourceCode}
        language="tsx"
        toolbar={
          <CodeBlockToolbar
            language="tsx"
            title="Button source"
            end={<CopyButton size="xs" value={sourceCode} variant="ghost" />}
          />
        }
      />

      <p className="mt-4">
        Use <InlineCodeHighlight code="CodeBlock" language="tsx" /> for inline
        API references.
      </p>
    </CodeWindow>
  );
}
```

## Install Example

```tsx
import { InstallCommandSnippet } from "@kuzenbo/code/ui/install-command-snippet";
import { PackageManagerTabs } from "@kuzenbo/code/ui/package-manager-tabs";

export function InstallExample() {
  return (
    <div className="space-y-4">
      <PackageManagerTabs persistPreference>
        {(manager) => (
          <pre>{manager} add @kuzenbo/code @kuzenbo/core @kuzenbo/theme</pre>
        )}
      </PackageManagerTabs>

      <InstallCommandSnippet
        packages={["@kuzenbo/code", "@kuzenbo/core", "@kuzenbo/theme"]}
      />
    </div>
  );
}
```

## CodeTabs Example

```tsx
import { CodeBlock } from "@kuzenbo/code/ui/code-block";
import { CodeTabs } from "@kuzenbo/code/ui/code-tabs";

const tabs = [
  {
    value: "react",
    label: "React",
    content: (
      <CodeBlock
        code={`import { Button } from "@kuzenbo/core";

export function SaveButton() {
  return <Button variant="outline">Save</Button>;
}`}
        language="tsx"
      />
    ),
  },
  {
    value: "api",
    label: "API Route",
    content: (
      <CodeBlock
        code={`import { NextResponse } from "next/server";

export const GET = () => NextResponse.json({ ok: true });`}
        language="ts"
      />
    ),
  },
] as const;

export function CodeTabsExample() {
  return <CodeTabs defaultValue="react" tabs={tabs} />;
}
```

## Review Example

```tsx
import { CodeDiffBlock } from "@kuzenbo/code/ui/code-diff-block";
import { CodeLineHighlight } from "@kuzenbo/code/ui/code-line-highlight";
import { TerminalBlock } from "@kuzenbo/code/ui/terminal-block";

const before = `export const status = "draft";`;
const after = `export const status = "published";`;

export function ReviewExample() {
  return (
    <div className="space-y-4">
      <CodeLineHighlight
        annotations={[{ line: 2, content: "Publish branch" }]}
        code={`const branch = "main";\nconst branch = "next";`}
        highlightedLines={[2]}
        language="ts"
      />

      <CodeDiffBlock newCode={after} oldCode={before} viewMode="split" />

      <TerminalBlock
        command="bun test"
        output={`PASS packages/code/src/ui/code-line-highlight/code-line-highlight.test.tsx\nPASS packages/code/src/ui/code-diff-block/code-diff-block.test.tsx\nPASS packages/code/src/ui/terminal-block/terminal-block.test.tsx`}
        title="CI"
      />
    </div>
  );
}
```

## Playground Example

```tsx
"use client";

import { Playground } from "@kuzenbo/code/ui/playground";
import { definePlaygroundControls } from "@kuzenbo/code/playground/playground-control-model";
import { Button } from "@kuzenbo/core/ui/button";

const controls = definePlaygroundControls([
  {
    type: "string",
    prop: "children",
    label: "Label",
    initialValue: "Run",
    defaultValue: "Run",
  },
  {
    type: "select",
    prop: "variant",
    label: "Variant",
    initialValue: "default",
    defaultValue: "default",
    options: ["default", "secondary", "outline", "danger"],
  },
] as const);

export function PlaygroundExample() {
  return (
    <Playground.Root
      codeMode="minimal"
      controls={controls}
      preview={<Button />}
      template={`import { Button } from "@kuzenbo/core";

export function Demo() {
  return <Button{{props}}>{{children}}</Button>;
}`}
    />
  );
}
```

## Explorer Example

```tsx
import { CodeBlock } from "@kuzenbo/code/ui/code-block";
import { CodePreview } from "@kuzenbo/code/ui/code-preview";
import { FileTree } from "@kuzenbo/code/ui/file-tree";

const files = [
  {
    id: "src",
    name: "src",
    children: [
      { id: "src-index", name: "index.ts" },
      { id: "src-button", name: "button.tsx" },
    ],
  },
];

export function ExplorerExample() {
  return (
    <CodePreview
      code={
        <CodeBlock
          code={`export { Button } from "@kuzenbo/core";`}
          language="tsx"
        />
      }
      minimalCode={
        <CodeBlock
          code={`export { Button } from "@kuzenbo/core";`}
          language="tsx"
        />
      }
      mode="split"
      preview={<FileTree data={files} openByDefault />}
      title="Source explorer"
    />
  );
}
```

## Shiki Utilities

- `highlightCode`: server-side block highlighting for docs and generated pages.
- `highlightInlineCode`: inline token highlighting for compact code references.
- `highlightCodeToHtml`: direct HTML generation when a raw highlighted string is required.
- `/docs` markdown fences use this highlighting pipeline automatically through the global MDX `pre`/`code` component overrides.

## Breaking Changes

`@kuzenbo/code` now uses a new canonical API surface.
Previous exports (`CodeSnippet`, `useCodeSnippetState`, `createMockSnippet`) are removed from the package entrypoint.

## Accessibility

- Copy interactions should keep explicit labels (`Copy install command`, `Copy source`).
- Keep preview and code panels clearly titled in split surfaces.
- Preserve line numbers when using review-focused views.

## SSR and RSC Notes

- `CodeBlock`, `InlineCodeHighlight`, and Shiki utilities can run in server output.
- Interactive surfaces (`CodeTabs`, `PackageManagerTabs`, `InstallCommandSnippet`, `CodePreview`, `Playground.*`, `FileTree`) are client components.

## Related Docs

- [Components Index](/docs/components)
- [Button](/docs/components/button)
- [Typography](/docs/components/typography)
- [Composition Patterns](/docs/patterns/composition)
